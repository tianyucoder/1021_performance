## 一、浏览器渲染引擎
### 主要模块
* 一个渲染引擎主要包括：HTML解析器，CSS解析器，javascript引擎，布局layout模块，绘图模块
	* HTML解析器：解释HTML文档的解析器，主要作用是将HTML文本解释成DOM树。
	* CSS解析器：它的作用是为DOM中的各个元素对象计算出样式信息，为布局提供基础设施
	* Javascript引擎：使用Javascript代码可以修改网页的内容，也能修改css的信息，javascript引擎能够解释javascript代码，并通过DOM接口和CSS树接口来修改网页内容和样式信息，从而改变渲染的结果。
	* 布局模块（layout）：在DOM创建之后，Webkit需要将其中的元素对象同样式信息结合起来，计算他们的大小位置等布局信息，形成一个能表达这所有信息的内部表示模型
	* 绘图模块（paint）：使用图形库将布局计算后的各个网页的节点绘制成图像结果
	>备注：文档对象模型（Document Object Model，简称DOM）
	
### 大致的渲染过程
* 从上到下扫描文档。
	1. 遇见 HTML 标记，调用HTML解析器去解析html,并构建DOM树。
    2. 遇见style/link标记，调用【相应的解析器】处理CSS，并构建出CSS样式树。
    3. 遇见script标记，调用javascript引擎处理script。
    4. 将 DOM树 与 CSS树 合并成一个渲染树。
    5. 根据渲染树来计算数中每个节点的几何信息（这一过程需要依赖GPU运算），然后执行渲染，
    6. 最终将各个节点绘制到屏幕上。

## 二、关于阻塞（重要）
#### 明确两个概念：解析、渲染、阻塞。
     1.解析是渲染的前序操作，要想渲染必须经过解析。
     2.我们可以用肉眼直观看出渲染的结果，但不能直观看出解析的过程。
     3.阻塞：A不把工作做完，B无法开始工作。

#### 1.关于css阻塞：
        声明：只有link引入的外部css才能够产生阻塞。
        1.style标签中的样式：
            (1). 由html解析器进行解析；
            (2). 不阻塞页面渲染（所以可能会产生“闪屏现象”）；
            (3). 不阻塞DOM解析；

        2.link引入的外部css样式（我们推荐使用的方式）：
            (1). 由CSS解析器进行解析。
            (2). 阻塞页面渲染(可以利用这种阻塞避免“闪屏现象”)。
            (3). 阻塞其后面的js语句的执行
            (4). 不阻塞DOM的解析(绝大多数浏览器的工作方式)：

        3.优化核心理念：尽可能快的提高外部css加载速度
            (1).使用CDN节点进行外部资源加速。
            (2).对css进行压缩(利用打包工具，比如webpack等)。
            (3).减少http请求数，将多个css文件合并。
            (4).优化样式表的代码

####2.关于js阻塞：
        1.阻塞后续DOM解析:
            原因：浏览器不知道脚本的后续内容，若先去解析了下面的html结构，而随后的js删除了后面所有的html结构，
                  那么浏览器就做了无用功。所以js的执行会阻塞页面的解析，。
        2.阻塞页面渲染:
            原因：解析是渲染的前序操作，经过了解析，才能渲染。即：阻塞了解析必定阻塞了渲染。
        3.阻塞后续js的执行:
            原因：要维护多个js的依赖关系，例如：必须先引入jquery.js再引入bootstrap.js

#### 备注：

1. 网页在加载和渲染过程中会触发“DOMContentLoaded”和“onload”事件：
        1.DOMContentLoaded：DOM解析完成之后触发
        2.onload：DOM树构建完并且网页所依赖的资源都加载完之后

2. 现代很多网页都是动态的，这意味着在第一次渲染完成之后，由于网页的动画、用户的交互等原因，浏览器会不停地
  重复执行上述渲染过程，每次都需要两个重要动作：绘制、排列。这就是我们所说的：【重绘】【重排】

	
	
	

			
	  
